//yamok : 0.0.2 : 2013-06-13
function buildTable(a,b,c){var d,e,f,g,h=document.createElement("table"),i=document.createElement("thead"),j=document.createElement("tbody"),k=document.createElement("div"),l=document.createElement("tr"),m=document.createElement("td"),n=document.createElement("th");h.setAttribute("class","main");var o=n.cloneNode();o.setAttribute("class","first"),e=l.cloneNode(),e.appendChild(o);for(var p=0;p<a.length;p++)d=n.cloneNode(),d.textContent=a[p],d.setAttribute("style","width: "+100/a.length+"%;"),e.appendChild(d);i.appendChild(e),h.appendChild(i);for(var q in b){g=l.cloneNode(),f=n.cloneNode(),f.textContent=b[q],g.appendChild(f);for(var p=0;p<a.length;p++){var r="",s="",t="";f=m.cloneNode();for(var u in c[a[p]])if(u===b[q])if(c[a[p]][u].length<=0)r="";else if(1===c[a[p]][u].length)r=c[a[p]][u][0],s=(a[p]+b[q]+r).toLowerCase().replace(/ /g,"").replace(/\./g,""),t=k.cloneNode(),t.setAttribute("id",s),t.innerHTML=r,f.appendChild(t);else for(var v=0;v<c[a[p]][u].length;v++)r=c[a[p]][u][v],s=(a[p]+b[q]+c[a[p]][u][v]).toLowerCase().replace(/ /g,"").replace(/\./g,""),t=k.cloneNode(),t.setAttribute("id",s),t.innerHTML=r,f.appendChild(t);g.appendChild(f)}j.appendChild(g)}h.appendChild(j);var r=document.getElementById("table-data");r.appendChild(h)}$(document).foundation(),$(function(){$(document).on("submit","form",function(a){if(a.preventDefault(),$("#testName").val()){var b=[];$(this).find(":checked").each(function(){b.push(this.getAttribute("id"))}),localStorage[$("#testName").val()]=b}$("#submitJson").val("Loading...").attr("disable","disable"),$.post($(this).attr("action"),$(this).serialize(),function(a){document.body.innerHTML="";var b=document.createElement("div");b.setAttribute("id","table-data");var c=document.createElement("div");c.setAttribute("id","raw-data");var d=document.createElement("textarea");d.textContent=a.output,c.appendChild(d),document.body.appendChild(b),document.body.appendChild(c),buildTable(a.os,a.browsers,a.versions)},"json")})}),$(function(){var a,b,c,d=document.createElement("a"),e=document.createElement("span");for(var f in localStorage)a=d.cloneNode(),a.textContent=f,a.setAttribute("href","#"),a.setAttribute("data-storage",f),a.setAttribute("class","set-storage"),c=d.cloneNode(),c.innerHTML="&times;",c.setAttribute("href","#"),c.setAttribute("data-remove",f),c.setAttribute("class","remove-storage"),b=e.cloneNode(),b.setAttribute("class","label radius secondary"),b.appendChild(a),b.appendChild(c),document.getElementById("saved-storage").appendChild(b);$(document).on("click",$("a.set-storage"),function(a){a.preventDefault(),$("input").find(":checked").removeAttr("checked"),$(".custom.checkbox.checked").removeClass("checked");var b=localStorage[$(this).data("storage")].split(",");$("#testName").val($(this).text());for(var c=0;c<b.length;c++)$("#"+b[c]).attr("checked","checked"),$("#"+b[c]).next(".custom").addClass("checked")}),$(document).on("click",$("a.remove-storage"),function(a){a.preventDefault();var b=confirm("Are you sure?");b&&(localStorage.removeItem($(this).data("remove")),$(this).parent().fadeOut())})}),$(function(){var a=document.createElement("div"),b=document.createElement("h3"),c=document.createElement("ul"),d=document.createElement("li"),e=document.createElement("form");e.setAttribute("class","custom"),e.setAttribute("action","/generate"),e.setAttribute("type","post");var f=document.createElement("label"),g=document.createElement("input"),h="";_.each(osArr,function(i,j){0===j%3&&(h=a.cloneNode(),h.setAttribute("class","row"));var k=a.cloneNode();k.setAttribute("class","large-4 columns");var l=b.cloneNode();l.textContent=i,k.appendChild(l);var m=c.cloneNode();m.setAttribute("class","no-bullet"),_.each(browserObj[i].__wrapped__,function(a){a.api_name=a.api_name.replace("googlechrome","chrome");var b=d.cloneNode(),c=g.cloneNode(),e=f.cloneNode(),h=(i+a.api_name+a.short_version).toLowerCase().replace(" ","").replace(/\./g,"");e.setAttribute("for",h),e.textContent=a.long_name+" "+a.short_version,c.setAttribute("id",h),c.setAttribute("value",'{"os": "'+i+'", "api_name": "'+a.api_name+'", "long_version": "'+a.long_version+'", "short_version": "'+a.short_version+'"}'),c.setAttribute("type","checkbox"),c.setAttribute("name","browser"),c.setAttribute("style","display:none;"),e.innerHTML=c.outerHTML+'<span class="custom checkbox "></span>'+e.innerHTML,b.appendChild(e),b.setAttribute("data-api-name",a.api_name),b.setAttribute("data-long-version",a.long_version),m.appendChild(b)}),k.appendChild(m),h.appendChild(k),e.appendChild(h)}),h=a.cloneNode(),h.setAttribute("class","row");var i=a.cloneNode(),j=g.cloneNode(),k=f.cloneNode();i.setAttribute("class","large-4 large-offset-4 columns"),j.setAttribute("type","text"),j.setAttribute("name","testName"),j.setAttribute("id","testName"),k.setAttribute("for","testName"),k.textContent="Save Test as: ",i.appendChild(k),i.appendChild(j),h.appendChild(i);var l=a.cloneNode();l.setAttribute("class","large-4 columns");var m=g.cloneNode();m.setAttribute("type","submit"),m.setAttribute("class","button"),m.setAttribute("id","submitJson"),l.appendChild(m),h.appendChild(l),e.appendChild(h),document.getElementById("browser-list").appendChild(e)});